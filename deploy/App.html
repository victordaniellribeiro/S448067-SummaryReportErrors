<!DOCTYPE html>
<html>
<head>
    <title>S448067-SummaryReportErrors</title>

    <script type="text/javascript" src="/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",_projectId:void 0,_releaseId:void 0,_releaseName:void 0,_iterationId:void 0,_iterationName:void 0,_mapErrors:void 0,_exportData:void 0,_exportButton:void 0,items:[{xtype:"container",itemId:"header",cls:"header"},{xtype:"container",itemId:"bodyContainer",width:"100%",autoScroll:!0},{xtype:"container",itemId:"detailsContainer",width:"100%",autoScroll:!0}],launch:function(){var t=this.getContext().getProject().ObjectID;this._projectId=t,console.log("Project:",this._projectId);var e=Ext.create("Rally.ui.combobox.ReleaseComboBox",{fieldLabel:"Choose Release",width:400,itemId:"releasaeComboBox",allowClear:!0,showArrows:!1,scope:this,listeners:{ready:function(t){var e=t.getRecord();this._releaseId=e.get("ObjectID"),this._releaseName=t.getRecord().get("Name"),console.log(e)},select:function(t,e){var a=e[0];this._releaseId=a.get("ObjectID"),this._releaseName=t.getRecord().get("Name"),this._releaseDate=a.get("ReleaseDate")},scope:this}}),a=Ext.create("Rally.ui.combobox.IterationComboBox",{fieldLabel:"Choose Iteration",width:400,itemId:"iterationComboBox",allowClear:!0,showArrows:!1,scope:this,listeners:{ready:function(t){var e=t.getRecord();this._iterationId=e.get("ObjectID"),this._iterationName=e.get("Name")},select:function(t,e,a){var o=e[0];this._iterationId=o.get("ObjectID"),this._iterationName=o.get("Name")},scope:this}}),o=Ext.create("Rally.ui.Button",{text:"Search",margin:"10 10 10 100",scope:this,handler:function(){this._doSearch(this._projectId,this._initDate,this._endDate)}});this._exportButton=Ext.create("Rally.ui.Button",{text:"Export",margin:"10 10 10 10",scope:this,handler:function(){var t=this._convertToCSV(this._exportData);console.log("converting to csv:",t);var e=document.createElement("a"),a=new Blob(["\ufeff",t]),o=URL.createObjectURL(a);e.href=o,e.download="report-errors.csv",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}),this.myMask=new Ext.LoadMask({msg:"Please wait...",target:this}),this.down("#header").add([{xtype:"panel",autoWidth:!0,height:50,layout:"hbox",items:[{xtype:"radiogroup",fieldLabel:"Choose parameter",items:[{xtype:"radiofield",id:"radio1",name:"parameter",boxLabel:"Release",padding:"0 10 0 0",inputValue:"r"},{boxLabel:"Iteration",name:"parameter",padding:"0 10 0 0",inputValue:"i",id:"radio2"},{boxLabel:"All",name:"parameter",padding:"0 10 0 0",inputValue:"a",id:"radio3"}],listeners:{change:function(t,o,s){var i=o.parameter;this._searchParameter=i,console.log("value radio:",i),"r"==i?(e.show(),a.hide()):"i"==i?(e.hide(),a.show()):"a"==i&&(e.hide(),a.hide())},scope:this}}]},{xtype:"panel",items:[e,a,o,this._exportButton]}]),e.hide(),a.hide(),this._exportButton.hide()},_doSearch:function(){this.down("#bodyContainer").removeAll(!0),this.down("#detailsContainer").removeAll(!0),this.myMask.show();var t=this._loadStoriesAndFeatures();Deft.Promise.all(t).then({success:function(t){console.log("artifacts loaded:",t);var e=this._loadData(t);this._generateGrid(e),this._exportButton.show()},failure:function(t){console.log("error:",t)},scope:this})},_loadStoriesAndFeatures:function(){console.log("loading features and stories");var t=Ext.create("Deft.Deferred"),e=void 0;return"r"==this._searchParameter?e={property:"Release.Name",operator:"=",value:this._releaseName}:"i"==this._searchParameter?e={property:"Iteration.Name",operator:"=",value:this._iterationName}:"a"==this._searchParameter&&(console.log("looking for all artifacts from aug 13 2017 until today"),e={property:"CreationDate",operator:">",value:"2017-08-13T00:00:00.000Z"}),Ext.create("Rally.data.wsapi.artifact.Store",{models:["HierarchicalRequirement","PortfolioItem/Feature","Defect"],fetch:["Name","FormattedID","ScheduleState","State","Project","c_StrategyCategory","PreliminaryEstimate","PreliminaryEstimateValue","Parent","PlannedEndDate","ActualEndDate","PercentDoneByStoryCount","Release","ReleaseDate","CreationDate","Feature","PlanEstimate","TestCaseStatus","Iteration","EndDate","Requirement","Environment","c_RootCause","Milestones","Resolution"],limit:1/0,context:{project:"/project/"+this._projectId,projectScopeUp:!1,projectScopeDown:!0},filters:[e],sorters:[{property:"CreationDate",direction:"ASC"}]}).load().then({success:function(e){t.resolve(e),this.myMask.hide()},scope:this}),t.promise},_generateGrid:function(t){var e=[],a=[],o=[];this._exportData=[],t.eachKey(function(t,s){this._exportData.push({projectName:t,featuremissingStrategy:s.featureStatistics.missingStrategy,featurenotSizedCorrectly:s.featureStatistics.notSizedCorrectly,featurenoParent:s.featureStatistics.noParent,featuremissingPlannedEndDate:s.featureStatistics.missingPlannedEndDate,featuremissingActualEndDate:s.featureStatistics.missingActualEndDate,featurepercentAndStateMismatch:s.featureStatistics.percentAndStateMismatch,featureoldReleaseNotDone:s.featureStatistics.oldReleaseNotDone,featurestateDoneButNoRelease:s.featureStatistics.stateDoneButNoRelease,featureagingReport:s.featureStatistics.agingReport,storynotSizedCorrectly:s.storyStatistics.notSizedCorrectly,storynoParent:s.storyStatistics.noParent,storynoTestCases:s.storyStatistics.noTestCases,storyiterationButNoRelease:s.storyStatistics.iterationButNoRelease,storyreleaseButNoIteration:s.storyStatistics.releaseButNoIteration,storyoldIterationNotAccepted:s.storyStatistics.oldIterationNotAccepted,defectnoParent:s.defectStatistics.noParent,defectnotSizedCorrectly:s.defectStatistics.notSizedCorrectly,defectnoEnvironment:s.defectStatistics.noEnvironment,defectnoResolution:s.defectStatistics.noResolution,defectrootCause:s.defectStatistics.rootCause,defectnoMilestone:s.defectStatistics.noMilestone,defectoldIterationNotAccepted:s.defectStatistics.oldIterationNotAccepted,defectmismatchStateAndSchedule:s.defectStatistics.mismatchStateAndSchedule,defectmissingIteration:s.defectStatistics.missingIteration,defectiterationButNoRelease:s.defectStatistics.iterationButNoRelease}),e.push({projectName:t,missingStrategy:s.featureStatistics.missingStrategy,notSizedCorrectly:s.featureStatistics.notSizedCorrectly,noParent:s.featureStatistics.noParent,missingPlannedEndDate:s.featureStatistics.missingPlannedEndDate,missingActualEndDate:s.featureStatistics.missingActualEndDate,percentAndStateMismatch:s.featureStatistics.percentAndStateMismatch,oldReleaseNotDone:s.featureStatistics.oldReleaseNotDone,stateDoneButNoRelease:s.featureStatistics.stateDoneButNoRelease,agingReport:s.featureStatistics.agingReport}),a.push({projectName:t,notSizedCorrectly:s.storyStatistics.notSizedCorrectly,noParent:s.storyStatistics.noParent,noTestCases:s.storyStatistics.noTestCases,iterationButNoRelease:s.storyStatistics.iterationButNoRelease,releaseButNoIteration:s.storyStatistics.releaseButNoIteration,oldIterationNotAccepted:s.storyStatistics.oldIterationNotAccepted}),o.push({projectName:t,noParent:s.defectStatistics.noParent,notSizedCorrectly:s.defectStatistics.notSizedCorrectly,noEnvironment:s.defectStatistics.noEnvironment,noResolution:s.defectStatistics.noResolution,rootCause:s.defectStatistics.rootCause,noMilestone:s.defectStatistics.noMilestone,oldIterationNotAccepted:s.defectStatistics.oldIterationNotAccepted,mismatchStateAndSchedule:s.defectStatistics.mismatchStateAndSchedule,missingIteration:s.defectStatistics.missingIteration,iterationButNoRelease:s.defectStatistics.iterationButNoRelease})},this);var s=Ext.create("Ext.data.JsonStore",{fields:["projectName","missingStrategy","notSizedCorrectly","noParent","missingPlannedEndDate","missingActualEndDate","percentAndStateMismatch","oldReleaseNotDone","stateDoneButNoRelease","agingReport"],data:e}),i=Ext.create("Ext.data.JsonStore",{fields:["projectName","notSizedCorrectly","noParent","noTestCases","iterationButNoRelease","releaseButNoIteration","oldIterationNotAccepted"],data:a}),r=Ext.create("Ext.data.JsonStore",{fields:["projectName","noParent","notSizedCorrectly","noResolution","noEnvironment","rootCause","noMilestone","oldIterationNotAccepted","mismatchStateAndSchedule","missingIteration","iterationButNoRelease"],data:o}),n=Ext.create("Ext.grid.Panel",{width:600,itemId:"featuresGrid",cls:"grid-header-project",store:s,viewConfig:{enableTextSelection:!0},listeners:{cellclick:function(t,e,a,o){var s=o.get("projectName");_.each(_.uniq(e.className.split(" ")),function(t){if(t.startsWith("custom")){var e=t.split(/[-]/)[1],a=t.split(/[-]/)[2];console.log(e,a),console.log(this._mapErrors[s]),console.log(this._mapErrors[s][e]),console.log(this._mapErrors[s][e][a]),this._showDetailsGrid(this._mapErrors[s][e][a])}},this)},scope:this},columns:[{dataIndex:"projectName",flex:3},{text:"Missing Strategy",dataIndex:"missingStrategy",flex:2,tdCls:"custom-features-missingStrategy"},{text:"Not Sized Correctly",dataIndex:"notSizedCorrectly",flex:2,tdCls:"custom-features-notSizedCorrectly"},{text:"No Parent",dataIndex:"noParent",flex:2,tdCls:"custom-features-noParent"},{text:"Missing Planned End Date",dataIndex:"missingPlannedEndDate",flex:2,tdCls:"custom-features-missingPlannedEndDate"},{text:"Missing Actual End Date",dataIndex:"missingActualEndDate",flex:2,tdCls:"custom-features-missingActualEndDate"},{text:"% & State Mismatched",dataIndex:"percentAndStateMismatch",flex:2,tdCls:"custom-features-percentAndStateMismatch"},{text:"Old release not done",dataIndex:"oldReleaseNotDone",flex:2,tdCls:"custom-features-oldReleaseNotDone"},{text:"Comp. miss Release",dataIndex:"stateDoneButNoRelease",flex:2,tdCls:"custom-features-stateDoneButNoRelease"},{text:"Aging Report",dataIndex:"agingReport",flex:2,tdCls:"custom-features-agingReport"}]}),l=Ext.create("Ext.grid.Panel",{width:450,itemId:"storiesGrid",cls:"grid-header-project",store:i,viewConfig:{enableTextSelection:!0},listeners:{cellclick:function(t,e,a,o,s,i,r){var n=o.get("projectName");_.each(_.uniq(e.className.split(" ")),function(t){if(t.startsWith("custom")){var e=t.split(/[-]/)[1],a=t.split(/[-]/)[2];console.log(e,a),console.log(this._mapErrors[n]),console.log(this._mapErrors[n][e]),console.log(this._mapErrors[n][e][a]),this._showDetailsGrid(this._mapErrors[n][e][a])}},this)},scope:this},columns:[{dataIndex:"projectName",flex:3},{text:"No Parent",dataIndex:"noParent",tdCls:"custom-stories-noParent",flex:2},{text:"Not Sized Correctly",dataIndex:"notSizedCorrectly",tdCls:"custom-stories-notSizedCorrectly",flex:2},{text:"Story No Test Case",dataIndex:"noTestCases",tdCls:"custom-stories-noTestCases",flex:2},{text:"Iteration No Release",dataIndex:"iterationButNoRelease",tdCls:"custom-stories-iterationButNoRelease",flex:2},{text:"Release No iteration",dataIndex:"releaseButNoIteration",tdCls:"custom-stories-releaseButNoIteration",flex:2},{text:"Old iteration Not Accpeted",dataIndex:"oldIterationNotAccepted",tdCls:"custom-stories-oldIterationNotAccepted",flex:2}]}),c=Ext.create("Ext.grid.Panel",{width:600,itemId:"defectsGrid",cls:"grid-header-project",store:r,viewConfig:{enableTextSelection:!0},listeners:{cellclick:function(t,e,a,o){var s=o.get("projectName");_.each(_.uniq(e.className.split(" ")),function(t){if(t.startsWith("custom")){var e=t.split(/[-]/)[1],a=t.split(/[-]/)[2];console.log(e,a),console.log(this._mapErrors[s]),console.log(this._mapErrors[s][e]),console.log(this._mapErrors[s][e][a]),this._showDetailsGrid(this._mapErrors[s][e][a])}},this)},scope:this},columns:[{dataIndex:"projectName",flex:3},{text:"No Parent",dataIndex:"noParent",tdCls:"custom-defects-noParent",flex:2},{text:"Not Sized Correctly",dataIndex:"notSizedCorrectly",tdCls:"custom-defects-notSizedCorrectly",flex:2},{text:"No Environment",dataIndex:"noEnvironment",tdCls:"custom-defects-noEnvironment",flex:2},{text:"No Resolution",dataIndex:"noResolution",tdCls:"custom-defects-noResolution",flex:2},{text:"No Root Cause",dataIndex:"rootCause",tdCls:"custom-defects-rootCause",flex:2},{text:"No Milestone",dataIndex:"noMilestone",tdCls:"custom-defects-noMilestone",flex:2},{text:"Old Iteration not Accepted",dataIndex:"oldIterationNotAccepted",tdCls:"custom-defects-oldIterationNotAccepted",flex:2},{text:"Mismatch State Schedule State",dataIndex:"mismatchStateAndSchedule",tdCls:"custom-defects-mismatchStateAndSchedule",flex:2},{text:"Missing Iteration",dataIndex:"missingIteration",tdCls:"custom-defects-missingIteration",flex:2},{text:"iterationButNoRelease",dataIndex:"iterationButNoRelease",tdCls:"custom-defects-iterationButNoRelease",flex:2}]}),d=Ext.create("Ext.panel.Panel",{width:680,title:"Features Statistics",autoScroll:!0,padding:5,layout:{type:"vbox",align:"stretch"},items:[n]}),u=Ext.create("Ext.panel.Panel",{width:450,title:"Story Statistics",autoScroll:!0,padding:5,layout:{type:"vbox",align:"stretch"},items:[l]}),m=Ext.create("Ext.panel.Panel",{width:680,title:"Defect Statistics",autoScroll:!0,padding:5,layout:{type:"vbox",align:"stretch"},items:[c]}),h=Ext.create("Ext.panel.Panel",{autoScroll:!0,layout:{type:"hbox",align:"stretch",padding:5},padding:5,items:[d,u,m]});this.down("#bodyContainer").add(h)},_showDetailsGrid:function(t){if(this.down("#detailsContainer").removeAll(!0),t&&t.length>0){console.log("totalArtifacts to show:",t);var e=[];_.each(t,function(t){var a,o,s=t.get("ObjectID"),i=t.get("State"),r=t.get("Release"),n=t.get("Iteration");"portfolioitem/feature"==t.get("_type")?(a="/portfolioitem/feature/",o=t.get("Parent")?t.get("Parent").FormattedID+" - "+t.get("Parent").Name:"",i=i?i.Name:""):"hierarchicalrequirement"==t.get("_type")?(a="/userstory/",o=t.get("Feature")?t.get("Feature").FormattedID+" - "+t.get("Feature").Name:""):"defect"==t.get("_type")&&(a="/defect/",o=t.get("Requirement")?t.get("Requirement").FormattedID+" - "+t.get("Requirement").Name:""),e.push({_ref:a+s,Name:t.get("Name"),CreationDate:t.get("CreationDate"),FormattedID:t.get("FormattedID"),State:i,ScheduleState:t.get("ScheduleState"),Iteration:n?n.Name:"",Release:r?r.Name:"",Parent:o,PreliminaryEstimate:t.get("PreliminaryEstimate")})},this);var a=Ext.create("Rally.data.custom.Store",{data:e,pageSize:1e3}),o=Ext.create("Rally.ui.grid.Grid",{showRowActionsColumn:!1,showPagingToolbar:!1,enableEditing:!1,itemId:"detailsGrid",id:"detailsGrid",store:a,columnCfgs:[{xtype:"templatecolumn",text:"ID",dataIndex:"FormattedID",tdCls:"x-change-cell",tpl:Ext.create("Rally.ui.renderer.template.FormattedIDTemplate")},{text:"Name",dataIndex:"Name",flex:2},{text:"Parent",dataIndex:"Parent",flex:1},{text:"Iteration",dataIndex:"Iteration"},{text:"Release",dataIndex:"Release"},{text:"State",dataIndex:"State"},{text:"Schedule State",dataIndex:"ScheduleState"},{text:"Creation Date",dataIndex:"CreationDate",xtype:"datecolumn",format:"m/d/Y"}]}),s=Ext.create("Ext.panel.Panel",{autoScroll:!0,padding:5,layout:{type:"vbox",align:"stretch"},items:[o]});this.down("#detailsContainer").add(s)}},_loadData:function(t){var e=new Ext.util.MixedCollection;return this._mapErrors={},_.each(t,function(t){var a,o=t.get("Project").Name;e.containsKey(o)?(a=e.get(o)).artifacts.push(t):((a={name:o,artifacts:[]}).artifacts.push(t),e.add(o,a))},this),console.log("all projects:",e),e.eachKey(function(t,e){var a={projectName:t,features:{missingStrategy:[],notSizedCorrectly:[],noParent:[],missingPlannedEndDate:[],missingActualEndDate:[],percentAndStateMismatch:[],oldReleaseNotDone:[],stateDoneButNoRelease:[],agingReport:[]},stories:{noParent:[],notSizedCorrectly:[],noTestCases:[],iterationButNoRelease:[],releaseButNoIteration:[],oldIterationNotAccepted:[]},defects:{oldIterationNotAccepted:[],noParent:[],notSizedCorrectly:[],noEnvironment:[],noResolution:[],rootCause:[],noMilestone:[],mismatchStateAndSchedule:[],missingIteration:[],iterationButNoRelease:[]}};this._mapErrors[t]=a},this),e.eachKey(function(t,e){e.featureStatistics=this._loadFeatureStatistics(e,e.artifacts),e.storyStatistics=this._loadStoryStatistics(e,e.artifacts),e.defectStatistics=this._loadDefectStatistics(e,e.artifacts)},this),console.log("projects with statistics:",e),console.log("project error map:",this._mapErrors),e},_loadFeatureStatistics:function(t,e){var a=t.name;console.log("extracting statistics for features of project:",a);var o={missingStrategy:0,notSizedCorrectly:0,noParent:0,missingPlannedEndDate:0,missingActualEndDate:0,percentAndStateMismatch:0,oldReleaseNotDone:0,stateDoneButNoRelease:0,agingReport:0};return _.each(e,function(t){if("portfolioitem/feature"==t.get("_type")){var e=t.get("PercentDoneByStoryCount"),s=null;t.get("State")&&(s=t.get("State").Name);var i=null;t.get("Release")&&(i=t.get("Release").ReleaseDate),t.get("c_StrategyCategory")||(o.missingStrategy+=1,this._mapErrors[a].features.missingStrategy.push(t)),t.get("PreliminaryEstimate")||(o.notSizedCorrectly+=1,this._mapErrors[a].features.notSizedCorrectly.push(t)),t.get("Parent")||(o.noParent+=1,this._mapErrors[a].features.noParent.push(t)),t.get("PlannedEndDate")||(o.missingPlannedEndDate+=1,this._mapErrors[a].features.missingPlannedEndDate.push(t)),t.get("ActualEndDate")||(o.missingActualEndDate+=1,this._mapErrors[a].features.missingActualEndDate.push(t)),(e>0&&e<1&&"In-Progress"!==s||(e=1)&&"Done"!==s&&"Staging"!==s||"Elaborating"!==s&&"Exploring"!==s&&null!==s&&(e=0))&&(o.percentAndStateMismatch+=1,this._mapErrors[a].features.percentAndStateMismatch.push(t)),i<new Date&&"Done"!==s&&"Staging"!==s&&(o.oldReleaseNotDone+=1,this._mapErrors[a].features.oldReleaseNotDone.push(t)),t.get("Release")||"Done"!==s&&"Staging"!==s||(o.stateDoneButNoRelease+=1,this._mapErrors[a].features.stateDoneButNoRelease.push(t)),t.creationDate<"2018-01-01T00:00:00.000Z"&&"Done"!=s&&(o.agingReport+=1,this._mapErrors[a].features.agingReport.push(t))}},this),o},_loadStoryStatistics:function(t,e){var a=t.name;console.log("extracting statistics for stories of project:",a);var o={noParent:0,notSizedCorrectly:0,noTestCases:0,iterationButNoRelease:0,releaseButNoIteration:0,oldIterationNotAccepted:0};return _.each(e,function(t){if("hierarchicalrequirement"==t.get("_type")){var e=t.get("Feature"),s=t.get("PlanEstimate"),i=t.get("CreationDate"),r=t.get("TestCaseStatus"),n=t.get("ScheduleState"),l=null;t.get("Iteration")&&(l=t.get("Iteration").EndDate),!e&&i>new Date("2017-08-13T00:00:00.000Z")&&(o.noParent+=1,this._mapErrors[a].stories.noParent.push(t)),-1===[0,1,2,3,5,8].indexOf(s)&&i>new Date("2017-08-13T00:00:00.000Z")&&(o.notSizedCorrectly+=1,this._mapErrors[a].stories.notSizedCorrectly.push(t)),"NONE"===r&&i>new Date("2018-01-01T00:00:00.000Z")&&("Accepted"===n||"Ready to Ship"===n||"Completed"===n||"In-Progress"===n)&&(o.noTestCases+=1,this._mapErrors[a].stories.noTestCases.push(t)),!t.get("Release")&&t.get("Iteration")&&i>new Date("2017-08-13T00:00:00.000Z")&&(o.iterationButNoRelease+=1,this._mapErrors[a].stories.iterationButNoRelease.push(t)),t.get("Release")&&!t.get("Iteration")&&i>new Date("2017-08-13T00:00:00.000Z")&&(o.releaseButNoIteration+=1,this._mapErrors[a].stories.releaseButNoIteration.push(t));var c=new Date;t.get("Iteration")&&"Accepted"!==n&&"Ready to Ship"!==n&&l<c&&i>new Date("2017-08-13T00:00:00.000Z")&&(o.oldIterationNotAccepted+=1,this._mapErrors[a].stories.oldIterationNotAccepted.push(t))}},this),o},_loadDefectStatistics:function(t,e){var a=t.name;console.log("extracting statistics for defects of project:",a);var o={oldIterationNotAccepted:0,noParent:0,notSizedCorrectly:0,noEnvironment:0,noResolution:0,rootCause:0,noMilestone:0,mismatchStateAndSchedule:0,missingIteration:0,iterationButNoRelease:0};return _.each(e,function(t){if("defect"==t.get("_type")){var e=t.get("CreationDate"),s=t.get("PlanEstimate"),i=t.get("ScheduleState"),r=t.get("Resolution"),n=t.get("Iteration"),l=t.get("Release"),c=t.get("State"),d=new Date;n&&"Accepted"!==i&&n.EndDate<d&&e>new Date("2017-08-13T00:00:00.000Z")&&(o.oldIterationNotAccepted+=1,this._mapErrors[a].defects.oldIterationNotAccepted.push(t)),!t.get("Requirement")&&e>new Date("2017-08-13T00:00:00.000Z")&&(o.noParent+=1,this._mapErrors[a].defects.noParent.push(t)),-1==[0,1,2,3,5,8].indexOf(s)&&e>new Date("2017-08-13T00:00:00.000Z")&&(o.notSizedCorrectly+=1,this._mapErrors[a].defects.notSizedCorrectly.push(t)),!t.get("Environment")&&e>new Date("2017-08-13T00:00:00.000Z")&&(o.noEnvironment+=1,this._mapErrors[a].defects.noEnvironment.push(t),console.log("Environment",t)),("Accepted"===i||"Ready to Ship"===i)&&!t.get("Resolution")&&e>new Date("2017-08-13T00:00:00.000Z")&&(o.noResolution+=1,this._mapErrors[a].defects.noResolution.push(t),console.log("Resolution",t)),("Accepted"===i||"Ready to Ship"===i)&&!t.get("c_RootCause")&&e>new Date("2017-08-13T00:00:00.000Z")&&(o.rootCause+=1,this._mapErrors[a].defects.rootCause.push(t),console.log("rootCause",t)),t.get("Milestones")||"Accepted"!==i&&"Ready to Ship"!==i||"Closed"!=c||"Code Change"!=r&&"Configuration Change"!=r&&"Database Change"!=r&&"Deployment Issue"!=r||!(e>new Date("2017-08-13T00:00:00.000Z"))||(console.log("Milestones",t),this._mapErrors[a].defects.noMilestone.push(t),o.noMilestone+=1),(("Accepted"==i||"Ready to Ship"==i)&&"Closed"!=c&&"Cancel"!=c||"Accepted"!=i&&"Ready to Ship"!=i&&"Closed"==c&&e>new Date("2017-08-13T00:00:00.000Z"))&&(console.log("state mismatched",t),this._mapErrors[a].defects.mismatchStateAndSchedule.push(t),o.mismatchStateAndSchedule+=1),"Unelaborated"!=i&&!n&&e>new Date("2017-08-13T00:00:00.000Z")&&(this._mapErrors[a].defects.missingIteration.push(t),o.missingIteration+=1),!l&&n&&e>new Date("2017-08-13T00:00:00.000Z")&&(this._mapErrors[a].defects.iterationButNoRelease.push(t),o.iterationButNoRelease+=1)}},this),o},_convertToCSV:function(t){var e=Object.keys(t[0]),a=function(t,e){return null===e?"":e},o=t.map(function(t){return e.map(function(e){return JSON.stringify(t[e],a)}).join(",")});return o.unshift(e.join(",")),o.join("\r\n")}});

            Rally.launchApp('CustomApp', {
                name:"S448067-SummaryReportErrors",
                parentRepos:"",
                version:"0.1.1"
            });

        });
    </script>


    <style type="text/css">
        .grid-header-project .x-box-inner{width:140px;height:145px !important}.grid-header-project .x-box-target{height:145px !important}.grid-header-project .x-column-header{height:145px !important}.grid-header-project .x-column-header-inner{height:145px !important}.grid-header-project .x-column-header-text{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);display:inline-flex;text-align:left;font-weight:bold;border-left-color:#fff;width:40px !important;height:25px !important;position:relative;margin-top:100px}.x-ie8 .grid-header-project .x-column-header-text{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);position:absolute;left:25px;bottom:20px}
    </style>
</head>
<body>
</body>
</html>
